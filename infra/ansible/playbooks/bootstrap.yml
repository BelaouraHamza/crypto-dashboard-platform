- name: Bootstrap local Kubernetes cluster with TLS and ArgoCD
  hosts: localhost
  vars:
    use_ci: false
  become_method: sudo
  become: yes
  connection: local
  gather_facts: no
  collections:
    - community.crypto

  tasks:
    - name: Apply TLS role
      ansible.builtin.include_role:
        name: roles/tls

    - name: Apply Cluster role
      ansible.builtin.include_role:
        name: cluster

    - name: Apply Deploy role
      ansible.builtin.include_role:
        name: deploy
